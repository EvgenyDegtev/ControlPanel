@model PagedList.PagedList<ControlPanel.Models.Route>
@using PagedList.Mvc

<h2>Index</h2>
<hr />

<div class="row">
	<div class="col-md-1">
		@Html.ActionLink("Добавить", "Create", new { }, new { @class = "btn btn-primary" })
	</div>
	<div class="col-md-11 form-inline">

		@using (Html.BeginForm("Index", "Routes"))
		{
			<div class="form-group">
				<label class="control-label">ID маршрута: </label>
				<input type="text" name="searchString" value="@ViewBag.searchString" data-autocomplete-source='@Url.Action("AutocompleteSearch","Agents")' class="form-control" />
				<input type="submit" value="Поиск" class="btn btn-primary" />
			</div>
		}
	</div>
</div>
<br />

<table class="table table-hover">
	<tr>
		<th>
			@Html.DisplayNameFor(model => model.ToList().FirstOrDefault().Name)
		</th>
		<th>
			@Html.DisplayNameFor(model => model.ToList().FirstOrDefault().Key)
		</th>
		<th>
			@Html.DisplayNameFor(model => model.ToList().FirstOrDefault().Skill.Name)
		</th>
		<th></th>
	</tr>

	@foreach (var route in Model)
	{
		<tr>
			<td>
				@Html.DisplayFor(model => route.Name)
			</td>
			<td>
				@Html.DisplayFor(model => route.Key)
			</td>
			<td>
				@Html.DisplayFor(model => route.Skill.Name)
			</td>
			<td>
				<a href=@Url.Action("Edit", new { id = route.Id })><i class="fa fa-edit"></i></a>
				|
				<a href=@Url.Action("Delete", new { id = route.Id })><i class="fa fa-close"></i></a>
			</td>
		</tr>
	}
</table>

Страница @(Model.PageCount<Model.PageNumber?0:Model.PageNumber) из @Model.PageCount
@Html.PagedListPager(Model, currentPage => Url.Action("Index", new { page = currentPage, searchString = ViewBag.searchString }))


